<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ski and Snowshoe Size Finder</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <script>navigator.serviceWorker.register("service-worker.js")</script> 
    <link rel="manifest" href="manifest.json" />
    <link rel="icon" href="https://www.sail.ca/static/version1731590178/frontend/Sailpleinair/sailpleinair/en_CA/Magento_Theme/favicon.ico" type="image/x-icon">
</head>
<body>
    <div class="container mt-5">
        <header class="text-center mb-4">
            <img src="https://www.sail.ca/static/version1731590178/frontend/Sailpleinair/sailpleinair/en_CA/images/logo.svg" alt="SAIL Logo" class="logo mb-3">
            <label class="font-weight-bold" style="color: #7CA529; font-size: 1.25rem; text-align: center; display: block; text-transform: uppercase;">Select your language:</label>
            <div class="language-selector">
                <div class="selection-box small-box" id="english" data-lang="en">
                    <img src="images/Flag_of_United_Kingdom.svg" alt="English" class="flag-icon">
                </div>
                <div class="selection-box small-box" id="french" data-lang="fr">
                    <img src="images/Flag_of_France.svg" alt="French" class="flag-icon">
                </div>
            </div>
            <h1 data-lang-en="Ski and Snowshoe Size Finder" data-lang-fr="Trouveur de taille de ski et de raquette">Ski and Snowshoe Size Finder</h1>
            <h2 data-lang-en="Determine the optimal length and width for your skis, snowshoes, and ski poles." data-lang-fr="Déterminez la longueur et la largeur optimales de vos skis, raquettes et bâtons de ski.">Determine the optimal length and width for your skis, snowshoes, and ski poles.</h2>
        </header>
        <main>
            <section class="user-info mb-4">
                <div class="form-group">
                    <label for="weight" class="font-weight-bold" data-lang-en="Your Weight:" data-lang-fr="Votre poids:">Your Weight:</label>
                    <select class="form-control" id="weight" name="weight" aria-label="Your Weight">
                        <!-- Options for weight in kg and lbs -->
                        <option value="20">20 kg - 44 lbs</option>
                        <option value="25">25 kg - 55 lbs</option>
                        <option value="30">30 kg - 66 lbs</option>
                        <option value="35">35 kg - 77 lbs</option>
                        <option value="40">40 kg - 88 lbs</option>
                        <option value="45">45 kg - 99 lbs</option>
                        <option value="50">50 kg - 110 lbs</option>
                        <option value="55">55 kg - 121 lbs</option>
                        <option value="60">60 kg - 132 lbs</option>
                        <option value="65">65 kg - 143 lbs</option>
                        <option value="70">70 kg - 154 lbs</option>
                        <option value="75">75 kg - 165 lbs</option>
                        <option value="80">80 kg - 176 lbs</option>
                        <option value="85">85 kg - 187 lbs</option>
                        <option value="90">90 kg - 198 lbs</option>
                        <option value="95">95 kg - 209 lbs</option>
                        <option value="100">100 kg - 220 lbs</option>
                        <option value="105">105 kg - 231 lbs</option>
                        <option value="110">110 kg - 243 lbs</option>
                        <option value="115">115 kg - 254 lbs</option>
                        <option value="120">120 kg - 265 lbs</option>
                        <!-- Add more options as needed -->
                    </select>
                </div>
                <div class="form-group">
                    <label for="height" class="font-weight-bold" data-lang-en="Your Height:" data-lang-fr="Votre taille:">Your Height:</label>
                    <select class="form-control" id="height" name="height" aria-label="Your Height">
                        <!-- Options for height in cm, meters, and feet -->
                        <option value="90">90 cm - 0.9 m - 2.95 ft</option>
                        <option value="95">95 cm - 0.95 m - 3.12 ft</option>
                        <option value="100">100 cm - 1.0 m - 3.28 ft</option>
                        <option value="105">105 cm - 1.05 m - 3.44 ft</option>
                        <option value="110">110 cm - 1.1 m - 3.61 ft</option>
                        <option value="115">115 cm - 1.15 m - 3.77 ft</option>
                        <option value="120">120 cm - 1.2 m - 3.94 ft</option>
                        <option value="125">125 cm - 1.25 m - 4.10 ft</option>
                        <option value="130">130 cm - 1.3 m - 4.27 ft</option>
                        <option value="135">135 cm - 1.35 m - 4.43 ft</option>
                        <option value="140">140 cm - 1.4 m - 4.59 ft</option>
                        <option value="145">145 cm - 1.45 m - 4.76 ft</option>
                        <option value="150">150 cm - 1.5 m - 4.92 ft</option>
                        <option value="155">155 cm - 1.55 m - 5.09 ft</option>
                        <option value="160">160 cm - 1.6 m - 5.25 ft</option>
                        <option value="165">165 cm - 1.65 m - 5.41 ft</option>
                        <option value="170">170 cm - 1.7 m - 5.58 ft</option>
                        <option value="175">175 cm - 1.75 m - 5.74 ft</option>
                        <option value="180">180 cm - 1.8 m - 5.91 ft</option>
                        <option value="185">185 cm - 1.85 m - 6.07 ft</option>
                        <option value="190">190 cm - 1.9 m - 6.23 ft</option>
                        <option value="195">195 cm - 1.95 m - 6.40 ft</option>
                        <option value="200">200 cm - 2.0 m - 6.56 ft</option>
                        <!-- Add more options as needed -->
                    </select>
                </div>
                <div class="form-group">
                    <label for="gender" class="font-weight-bold" data-lang-en="Gender:" data-lang-fr="Genre:">Gender:</label>
                    <select class="form-control" id="gender" name="gender" aria-label="Your Gender">
                        <option value="male" data-lang-en="Male" data-lang-fr="Homme">Male</option>
                        <option value="female" data-lang-en="Female" data-lang-fr="Femme">Female</option>
                    </select>
                </div>
                <div class="form-group mt-5">
                    <label for="style" class="font-weight-bold" style="color: #7CA529; font-size: 1.25rem; text-align: center; display: block; text-transform: uppercase;" data-lang-en="Skiing Style:" data-lang-fr="Style de ski:">Skiing Style:</label>
                    <table class="table table-selection">
                        <tbody>
                            <tr>
                                <td>
                                    <div class="selection-box" id="cross-country" data-value="cross-country" data-group="style">
                                        <i class="fas fa-skiing-nordic"></i>
                                        <p data-lang-en="Cross-Country" data-lang-fr="Ski de fond">Cross-Country</p>
                                    </div>
                                </td>
                                <td>
                                    <div class="selection-box" id="skate" data-value="skate" data-group="style">
                                        <i class="fas fa-skiing"></i>
                                        <p data-lang-en="Skate" data-lang-fr="Ski de patinage">Skate</p>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="form-group mt-5">
                    <label for="skill" class="font-weight-bold" style="color: #7CA529; font-size: 1.25rem; text-align: center; display: block; text-transform: uppercase;" data-lang-en="Skill Level:" data-lang-fr="Niveau de compétence:">Skill Level:</label>
                    <table class="table table-selection">
                        <tbody>
                            <tr>
                                <td>
                                    <div class="selection-box" id="beginner" data-value="beginner" data-group="skill">
                                        <i class="fas fa-child"></i>
                                        <p data-lang-en="Beginner" data-lang-fr="Débutant">Beginner</p>
                                    </div>
                                </td>
                                <td>
                                    <div class="selection-box" id="intermediate" data-value="intermediate" data-group="skill">
                                        <i class="fas fa-user"></i>
                                        <p data-lang-en="Intermediate" data-lang-fr="Intermédiaire">Intermediate</p>
                                    </div>
                                </td>
                                <td>
                                    <div class="selection-box" id="advanced" data-value="advanced" data-group="skill">
                                        <i class="fas fa-user-tie"></i>
                                        <p data-lang-en="Advanced" data-lang-fr="Avancé">Advanced</p>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="form-group mt-5">
                    <label for="terrain" class="font-weight-bold" style="color: #7CA529; font-size: 1.25rem; text-align: center; display: block; text-transform: uppercase;" data-lang-en="Terrain Type:" data-lang-fr="Type de terrain:">Terrain Type:</label>
                    <table class="table table-selection">
                        <tbody>
                            <tr>
                                <td>
                                    <div class="selection-box" id="groomed" data-value="groomed" data-group="terrain">
                                        <i class="fas fa-road"></i>
                                        <p data-lang-en="Groomed Trails" data-lang-fr="Sentiers damés">Groomed Trails</p>
                                    </div>
                                </td>
                                <td>
                                    <div class="selection-box" id="backcountry" data-value="backcountry" data-group="terrain">
                                        <i class="fas fa-mountain"></i>
                                        <p data-lang-en="Backcountry" data-lang-fr="Hors-piste">Backcountry</p>
                                    </div>
                                </td>
                                <td>
                                    <div class="selection-box" id="mixed" data-value="mixed" data-group="terrain">
                                        <i class="fas fa-tree"></i>
                                        <p data-lang-en="Mixed" data-lang-fr="Mixte">Mixed</p>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="text-center mt-2">
                    <button id="calculate-btn" class="btn btn-primary" aria-label="Calculate" data-lang-en="Calculate" data-lang-fr="Calculer">Calculate</button>
                    <button id="reset-btn" class="btn btn-secondary" aria-label="Reset" data-lang-en="Reset" data-lang-fr="Réinitialiser">Reset</button>
                </div>
            </section>
            <section class="results">
                <h3 class="font-weight-bold" style="color: #7CA529; font-size: 1.25rem; text-align: center; display: block; text-transform: uppercase;" data-lang-en="Recommendations" data-lang-fr="Recommandations">Recommendations</h3>
                <table class="table table-bordered">
                    <thead>
                        <tr>
                            <th scope="col" data-lang-en="Type" data-lang-fr="Type">Type</th>
                            <th scope="col" data-lang-en="Recommendation" data-lang-fr="Recommandation">Recommendation</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td data-lang-en="Recommended Ski Length (cm)" data-lang-fr="Longueur de ski recommandée (cm)">Recommended Ski Length (cm)</td>
                            <td><span id="recommended-length" aria-live="polite"></span></td>
                        </tr>
                        <tr>
                            <td data-lang-en="Recommended Ski Width (mm)" data-lang-fr="Largeur de ski recommandée (mm)">Recommended Ski Width (mm)</td>
                            <td><span id="recommended-width" aria-live="polite"></span></td>
                        </tr>
                        <tr>
                            <td data-lang-en="Suggested Ski Size for You" data-lang-fr="Taille de ski suggérée pour vous">Suggested Ski Size for You</td>
                            <td><span id="suggested-ski-size" aria-live="polite"></span></td>
                        </tr>
                        <tr>
                            <td data-lang-en="Recommended Snowshoe Length (in)" data-lang-fr="Longueur de raquette recommandée (in)">Recommended Snowshoe Length (in)</td>
                            <td><span id="recommended-snowshoe-length" aria-live="polite"></span></td>
                        </tr>
                        <tr>
                            <td data-lang-en="Recommended Ski Pole Length (cm)" data-lang-fr="Longueur de bâton de ski recommandée (cm)">Recommended Ski Pole Length (cm)</td>
                            <td><span id="recommended-pole-length" aria-live="polite"></span></td>
                        </tr>
                    </tbody>
                </table>
            </section>
        </main>

        <!-- Counter display -->
        <p id="user-counter" class="text-center">Clients Assisted This Week: 0</p>

        <footer class="text-center mt-4">
            <p data-lang-en="Disclaimer: These recommendations are general. For precise fitting, consult a SAIL Camping Associate." data-lang-fr="Avertissement : Ces recommandations sont générales. Pour un ajustement précis, consultez un associé de camping SAIL.">Disclaimer: These recommendations are general. For Cross-Country Skiing in Backcountry or Offtrail consider 55mm + on the width of the Ski. For precise fitting, consult a SAIL Camping Associate.</p>
            <p>&copy; <a href="https://sail.ca" target="_blank" aria-label="David Muñoz Jensen Ski Tool" data-lang-en="SAIL Plein Air 2024" data-lang-fr="SAIL Plein Air 2024">SAIL Plein Air 2024</a></p>
        </footer>
    </div>
    <!-- Include Firebase SDKs -->
    <script type="module">
      // Import the functions you need from the SDKs you need
      import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-app.js";
      import { getDatabase, ref, onValue, runTransaction } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-database.js";
      // Your web app's Firebase configuration
      const firebaseConfig = {
        apiKey: "AIzaSyD926t439MidAbOtVP1pFtOUlSb-rU1Plc",
        authDomain: "counter-7437b.firebaseapp.com",
        databaseURL: "https://counter-7437b-default-rtdb.firebaseio.com",
        projectId: "counter-7437b",
        storageBucket: "counter-7437b.appspot.com",
        messagingSenderId: "865274425490",
        appId: "1:865274425490:web:4c521e426fc3df3c28f64b",
        measurementId: "G-6R3MCCTG6P"
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const database = getDatabase(app);

      // Reference to the counter in the database
      const counterRef = ref(database, 'userCounter');

      // Function to increment the counter
      function incrementCounter() {
          runTransaction(counterRef, (currentValue) => {
              return (currentValue || 0) + 1;
          });
      }

      // Display the counter value
      onValue(counterRef, (snapshot) => {
          const count = snapshot.val() || 0;
          document.getElementById('user-counter').textContent = `Clients Assisted This Week: ${count}`;
      });

      document.addEventListener('DOMContentLoaded', () => {
          const calculateBtn = document.getElementById('calculate-btn');

          calculateBtn.addEventListener('click', () => {
              // Existing code for calculation (if any)
              // ...

              // Increment counter in Firebase
              incrementCounter();
          });

          // Existing selection box code
          const selectionBoxes = document.querySelectorAll('.selection-box');

          selectionBoxes.forEach(box => {
              box.addEventListener('click', () => {
                  const group = box.closest('table').querySelectorAll('.selection-box');
                  group.forEach(s => s.classList.remove('selected'));
                  box.classList.add('selected');
              });
          });

            // Set default selected styles
            document.getElementById('cross-country').classList.add('selected');
            document.getElementById('beginner').classList.add('selected');
            document.getElementById('groomed').classList.add('selected');

            // Language switcher
            const languageBoxes = document.querySelectorAll('.language-selector .selection-box');
            languageBoxes.forEach(box => {
                box.addEventListener('click', () => {
                    languageBoxes.forEach(s => s.classList.remove('selected'));
                    box.classList.add('selected');
                    const lang = box.getAttribute('data-lang');
                    switchLanguage(lang);
                });
            });

            function switchLanguage(lang) {
                document.querySelectorAll('[data-lang-en]').forEach(el => {
                    el.textContent = el.getAttribute(`data-lang-${lang}`);
                });
            }

            // Set default language
            document.getElementById('english').classList.add('selected');

            
        }); 
    </script>
</body>
</html>